<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Data Collection App{% endblock %}</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link rel="icon" href="{{ url_for('static', filename='img/favicon.ico') }}" type="image/x-icon">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style_base.css') }}">
    {% block links %}{% endblock %}
</head>
<body >
    <!-- ******************************* Nav Bar ************************* -->
    <nav class="navbar navbar-expand-lg navbar-dark p-0 fixed-top" id="nav_barre">
        <div class="container">
            <!-- Logo -->
            <a class="navbar-brand fw-bold d-flex align-items-center" href="/">
                <img src="{{ url_for('static', filename='img/logo.png') }}" class="rounded-circle me-2" alt="MetaCollect" width="50" height="50">
                <span class="fw-bold fs-4 m-0 theme">MetaCollect</span>
            </a>
      
            <!-- Bouton mobile -->
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
                    aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
      
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto fw-bold">
      
                    <!-- Accueil -->
                    <li class="nav-item">
                        <a class="nav-link" href="/accuiel">
                            <i class="bi bi-house-fill me-1 theme"></i> Accueil
                        </a>
                    </li>
      
                    <!-- Nouveau projet -->
                    <li class="nav-item">
                        <a class="nav-link" href="{{ url_for('projects.create_project') }}">
                            <i class="bi bi-plus-circle me-1 theme"></i> Nouveau Projet
                        </a>
                    </li>
      
                    <!-- Liste des projets dropdown -->
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">
                            <i class="bi bi-list-task me-1 theme"></i> Liste des Projets
                        </a>
                        <ul class="dropdown-menu text-white">
                            <li>
                                <a class="dropdown-item" href="#">
                                    <i class="bi bi-file-earmark-text me-2 theme"></i> Afficher le formulaire
                                </a>
                            </li>
                            <li>
                                <a class="dropdown-item" href="#">
                                    <i class="bi bi-people me-2 theme"></i> Afficher les utilisateurs
                                </a>
                            </li>
                            <li>
                                <a class="dropdown-item" href="#">
                                    <i class="bi bi-file-earmark-spreadsheet me-2 theme"></i> Exporter des données
                                </a>
                            </li>
                        </ul>
                    </li>
      
                    <!-- Contact -->
                    <li class="nav-item">
                        <a class="nav-link" href="{{ url_for('contact.contact') }}">
                            <i class="bi bi-envelope me-1 theme"></i> Contact
                        </a>
                    </li>
      
                    <!-- À propos -->
                    <li class="nav-item">
                        <a class="nav-link" href="{{ url_for('help.help') }}">
                            <i class="bi bi-info-circle-fill me-1 theme"></i> À propos
                        </a>
                    </li>
      
                    <!-- Profil utilisateur -->
                    {% if current_user.is_authenticated %}
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle d-flex align-items-center" href="#" role="button" data-bs-toggle="dropdown">
                            <img src="{{ url_for('static', filename='uploads/' + current_user.profil) }}" width="30px" height="30px" class="rounded-circle me-2" alt="{{ current_user.username }}">
                            
                        </a>
                        <ul class="dropdown-menu text-white dropdown-menu-end">
                            <li>
                                <a class="dropdown-item" href="#" data-bs-toggle="modal" data-bs-target="#profileModal">
                                    <i class="bi bi-person-circle me-2 theme"></i> Profil
                                </a>
                            </li>
                            <li>
                                <a class="dropdown-item" href="#">
                                    <i class="bi bi-moon-stars me-2 theme"></i> Mode Sombre
                                </a>
                            </li>
                            <li>
                                <a class="dropdown-item" href="{{ url_for('logout') }}">
                                    <i class="bi bi-box-arrow-right me-2 theme"></i> Déconnexion
                                </a>
                            </li>
                        </ul>
                    </li>
                    {% endif %}
      
                </ul>
            </div>
        </div>
    </nav>

    <div class="container-fluid mt-4 flex-grow-1">
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                {% for category, message in messages %}
                    <div class="alert alert-{{ 'danger' if category == 'error' else 'success' }} alert-dismissible fade show" role="alert">
                        {{ message }}
                        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                    </div>
                {% endfor %}
            {% endif %}
        {% endwith %}

        {% block content %}{% endblock %}
    </div>

    <!-- Footer dynamique -->
    <footer class="text-white mt-auto pt-5 paw mt-5">
    <div class="max-w-7xl mx-auto grid grid-cols-1 md:grid-cols-4 gap-6 p-4">
      
      <!-- MetaCollect info -->
      <div>
        <h5 class="font-bold italic mb-3 polygone">MetaCollect</h5>
        <p class="text-sm">Ce site a été conçu pour vous offrir un accès simple et rapide à une large gamme pour collecte et conservées des données.</p>
        <div class="m-0 mt-3 solialMedia pb-2">
          <ul class="sci m-0 p-0">
            <li data-text="Facebook" data-color="#1877f2">
                <a href="https://www.facebook.com" class="facebook">
                    <i class="bi bi-facebook" style="--socialColor: #1877f2;"></i>
                </a>
            </li>
            <!-- <li data-text="YouTube" data-color="#ff0000">
                <a href="https://www.youtube.com" class="youtube">
                    <i class="bi bi-youtube" style="--socialColor: #ff0000;"></i>
                </a>
            </li> -->
            <li data-text="Twitter" data-color="#0099ff">
                <a href="https://www.twitter.com" class="twitter">
                    <i class="bi bi-twitter" style="--socialColor: #0099ff;"></i>
                </a>
            </li>
            <li data-text="Instagram" data-color="#e4405f">
                <a href="https://www.intagram.com" class="instagram">
                    <i class="bi bi-instagram" style="--socialColor: #e4405f;"></i>
                </a>
            </li>
            <li data-text="WhatsApp" data-color="#11ee11">
                <a href="https://www.whatsapp.com" class="whatsapp">
                    <i class="bi bi-whatsapp" style="--socialColor: #11ee11;"></i>
                </a>
            </li>
            <li data-text="Telegram" data-color="#023e7a">
                <a href="https://www.telegram.org" class="telegram">
                    <i class="bi bi-telegram" style="--socialColor: #023e7a;"></i>
                </a>
            </li>
            <!-- <li data-text="Linkedin" data-color="#ff4500">
                <a href="https://www.linkedin.com" class="linkedin">
                    <i class="bi bi-linkedin" style="--socialColor: #ff4500;"></i>
                </a>
            </li> -->
          </ul>
        </div>
      </div>
      
      <!-- Menu -->
      <div>
        <h5 class="font-bold mb-3 ms-5 polygone">Navige</h5>
        <ul class="space-y-2">
          <li><a href="/accueil" class="font_text text-white text-decoration-none hover:underline flex items-center gap-1 for-icon"><i class="bi bi-house-fill theme"></i> Accueil</a></li>
          <li><a href="{{ url_for('projects.create_project') }}" class="font_text text-white text-decoration-none hover:underline flex items-center gap-1 for-icon"><i class="bi bi-plus-circle theme"></i> Nouveau Projet</a></li>
          <li><a href="{{ url_for('projects.projects') }}" class="font_text text-white text-decoration-none hover:underline flex items-center gap-1 for-icon"><i class="bi bi-list-task theme"></i> Liste de Projet</a></li>
        </ul>
      </div>
  
       <!-- Avantages / Services -->
       <div>
        <h5 class="font-bold mb-3 ms-5 polygone">Avantages</h5>
        <ul class="space-y-2">
            <li class="for-icon"><i class="bi bi-lightning-fill me-2 theme"></i> Collecte rapide de données</li>
            <li class="for-icon"><i class="bi bi-ui-checks-grid me-2 theme"></i> Interface intuitive</li>
            <li class="for-icon"><i class="bi bi-shield-lock-fill me-2 theme"></i> Sécurisé et fiable</li>
            <li class="for-icon"><i class="bi bi-headset me-2 theme"></i> Support 24/7</li>

        </ul>
        </div>
  
      <!-- Contact -->
      <div>
        <h5 class="font-bold mb-3 ms-4 polygone">Contact us</h5>
        <ul class="space-y-2 text-sm">
          <li class="for-icon"><i class="bi bi-geo-alt me-2 theme"></i>304 Fandriana Ambositra</li>
          <li class="for-icon"><i class="bi bi-phone me-2 theme"></i>+261 34 01 098 12</li>
          <li class="for-icon"><i class="bi bi-phone me-2 theme"></i>+261 38 97 956 32</li>
          <li class="for-icon"><i class="bi bi-phone me-2 theme"></i>+261 34 26 857 55</li>
          <li class="for-icon"><i class="bi bi-envelope me-2 theme"></i>metacollect,304@gmail.mg</li>
        </ul>
      </div>
  
    </div>
    <hr class="dash_right m-0 p-0">
    <div class="card_right m-0 py-3 d-flex align-items-center justify-content-center">
      <p class="text-center m-0 p-0">© {{ current_year if current_year else 2025 }} MetaCollect. Tous droits réservés.</p>
    </div>
  
    <!-- *************** To top ************** -->
    <a href="" class="scrollUp" title="Go Top">
      <div class="inner-scrollUp">
          <div class="button-scrollUp">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512" fill="white" height="20" width="20">
                  <path d="M350 177.5c3.8-8.8 2-19-4.6-26l-136-144C204.9 2.7 198.6 0 192 0s-12.9 2.7-17.4 7.5l-136 
                  144c-6.6 7-8.4 17.2-4.6 26s12.5 14.5 22 14.5l88 0 0 192c0 17.7-14.3 32-32 32l-80 0c-17.7 0-32 
                  14.3-32 32l0 32c0 17.7 14.3 32 32 32l80 0c70.7 0 128-57.3 128-128l0-192 88 0c9.6 0 18.2-5.7 22-14.5z"/>
              </svg>
              <svg class="scroll-circle">
                  <circle cx="20" cy="20" r="20"></circle>
                  <circle cx="20" cy="20" r="20" id="circleIndicator"></circle>
              </svg>
          </div>
      </div>
    </a>
    </footer>

    <!-- Modal pour modifier profil -->
<div class="modal fade" id="profileModal" tabindex="-1" aria-labelledby="profileModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <form method="POST" action="{{ url_for('update_profile.update_profile') }}">
                <div class="modal-header">
                    <h5 class="modal-title" id="profileModalLabel">Modifier Profil</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-3">
                        <label for="username" class="form-label">Nom d'utilisateur</label>
                        <input type="text" class="form-control" id="username" name="username" value="{{ current_user.username }}" required>
                    </div>
                    <div class="mb-3">
                        <label for="email" class="form-label">Email</label>
                        <input type="email" class="form-control" id="email" name="email" value="{{ current_user.email }}" required>
                    </div>
                    <!-- Ajouter d'autres champs selon ton modèle User -->
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
                    <button type="submit" class="btn btn-primary">Sauvegarder</button>
                </div>
            </form>
        </div>
    </div>
</div>


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://unpkg.com/@dotlottie/player-component@latest/dist/dotlottie-player.mjs" type="module"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.5/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.5/ScrollTrigger.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo="
    crossorigin="anonymous"></script>
    <!-- <script src="{{ url_for('static', filename='js/jquery-3.7.1.min.js') }}"></script> -->
    <script src="https://cdn.jsdelivr.net/npm/vanilla-tilt@1.8.1/dist/vanilla-tilt.min.js"></script>
    <!-- <script src="{{ url_for('static', filename='js/vanilla-tilt.min.js') }}"></script> -->
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
    <script src="{{ url_for('static', filename='js/forms.js') }}"></script>
    <script src="{{ url_for('static', filename='js/script_base.js') }}"></script>
    {% block scripts %}{% endblock %}
</body>
</html>
